library(DataBaseAlpEnvEURAC)
library(DataBaseAlpEnvEURAC)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B2",aggr_time = "h",file.name = "testB2.txt")
library(DataBaseAlpEnvEURAC)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B2",aggr_time = "h",file.name = "testB2.txt")
dB_getSoilTemp(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",aggr_time = "h",station_nr = 2,write.csv = T,path2write = "./")
dB_getSoilTemp(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",aggregation = "h",station_nr = 2,write.csv = T,path2write = "./")
swc<-dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",aggregation = "h",station_nr = 2,write.csv = T,path2write = "./")
plot(swc)
swp<-dB_getSWP(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",aggregation = "h",station_nr = 2,write.csv = T,path2write = "./")
plot(swp)
?trunc.minutes
files<-dir("H:/Projekte/HiResAlp/06_Workspace/BrJ/04_R_data_analyses/data_base/ZRX/"))
files<-dir("H:/Projekte/HiResAlp/06_Workspace/BrJ/04_R_data_analyses/data_base/ZRX/")
files
files(files[1,3,5])
files<-files[1,3,5]
files<-files[c(1,3,5)]
files
stnames <- c()
out_data <- list()
out_metadata <- list()
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
source.with.encoding('~/GitHub/DataBaseAlpEnvEURAC/R/dB_readZRX.R', encoding='UTF-8', echo=TRUE)
do.hourly=T
do.quality=T
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = FALSE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
files<-dir("H:/Projekte/HiResAlp/06_Workspace/BrJ/04_R_data_analyses/data_base/ZRX/",full.names = T)
files
files<-files[c(1,3,5)]
stnames <- c()
out_data <- list()
out_metadata <- list()
# read data via loop over files
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = FALSE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
library(zoo)
library(chron)
stnames <- c()
out_data <- list()
out_metadata <- list()
# read data via loop over files
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = FALSE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
str(out_data)
stations <- unique(stnames)
stations
t <- lapply(X = out_data, FUN = function(x){
lapply(X = x, FUN = function(x){
diff(range(time(x)))
})
})
t <- lapply(t, unlist)
min1 <- lapply(t, which.min)
min2 <- which.min(unlist(lapply(t, which.min)))
# dummy for station data
station_data <- list()
# loop over unique station vector
for (i in stations)
{
# dummy for specific station and variable available for this station
dummy <- zoo(NA, time(out_data[[min2]][[min1[[min2]]]]))
name_spec <- c()
# loop over variables
for (dat in names(out_data))
{
#get meta data for variable dat
metadata <- out_metadata[[dat]]
#get data for variable dat and station i
data <- out_data[[dat]]
if ( any(names(data)==i) ){
st_data <- data[[i]]
dummy <- merge(dummy, st_data)
name_spec <- c(name_spec, TRUE)
} else {
name_spec <- c(name_spec, FALSE)
}
}
dummy <- dummy[,-1]
# name coloums of zoo object
names(dummy) <- names(out_data)[name_spec]
files
files <- files[2]
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = TRUE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
source('~/GitHub/DataBaseAlpEnvEURAC/R/dB_chron.R', echo=TRUE)
# read data via loop over files
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = TRUE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
source.with.encoding('~/GitHub/DataBaseAlpEnvEURAC/R/dB_readZRX.R', encoding='UTF-8', echo=TRUE)
for (i in files)
{
out  <- dB_readZRX(i, do.hourly = do.hourly, do.quality = do.quality, chron = TRUE)
out_data[[substr(i,1,nchar(i)-4)]] <- out[[1]]
out_metadata[[substr(i,1,nchar(i)-4)]] <- out[[2]]
stnames <- c(stnames, names(out_data[[substr(i,1,nchar(i)-4)]]))
}
library("DataBaseAlpEnvEURAC", lib.loc="~/R/win-library/3.0")
station_meta <- read.table("data/Stations.txt", sep=",", header=T)
View(station_meta)
save.image("~/GitHub/DataBaseAlpEnvEURAC/data/data.RDate.RData")
load("~/GitHub/DataBaseAlpEnvEURAC/data/data.RData")
library(DataBaseAlpEnvEURAC)
data()
data(station_meta)
library(DataBaseAlpEnvEURAC)
data(station_meta)
station_meta
library(DataBaseAlpEnvEURAC)
library(DataBaseAlpEnvEURAC)
library(DataBaseAlpEnvEURAC)
?dB_getSWC
B2 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",station_nr = 2,calibration = F,aggregation = "h", remove_freezing = T,write.csv = T,path2write = "./")
str(B2)
plot(B2)
I1 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/I1/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/header_I1.txt",station = "I",station_nr = 1,calibration = F,aggregation = "h", remove_freezing = T,write.csv = T,path2write = "./")
plot(I1)
I3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/I3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/header_I3.txt",station = "I",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = T,write.csv = T,path2write = "./")
plot(I3)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = T,write.csv = T,path2write = "./")
P1 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P1/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 1,calibration = F,aggregation = "h", remove_freezing = T,write.csv = T,path2write = "./")
plot(P1)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./")
P1 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P1/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 1,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./")
plot(P1)
P2 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P2.txt",station = "P",station_nr = 2,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./")
plot(P2)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
data<-rep(NA,10)
1:dim(data)[2]
library(DataBaseAlpEnvEURAC)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
plot(P3)
rm(data)
B2 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",station = "B",station_nr = 2,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
I1 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/I1/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/header_I1.txt",station = "I",station_nr = 1,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
I3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/I3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/I/header_I3.txt",station = "I",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
P1 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P1/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 1,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
P2 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P2.txt",station = "P",station_nr = 2,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
P3 <- dB_getSWC(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/P3/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/P/header_P.txt",station = "P",station_nr = 3,calibration = F,aggregation = "h", remove_freezing = F,write.csv = T,path2write = "./", minVALUE = 0, maxVALUE = 1)
save.image("D:/temp/R/SMC_Pattern_Montecini/ClimateXDS.RData")
library(DataBaseAlpEnvEURAC)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt", station = "B2", mkreg = F, aggr_time = "h", file.name = "meteoB".txt,skipwinter = F)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt", station = "B2", mkreg = F, aggr_time = "h", file.name = "meteoB".txt,skipwinter = F)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",
header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",
station = "B2", mkreg = F, aggr_time = "h", file.name = "meteoB".txt,skipwinter = F)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",
header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",
station = "B2", mkreg = F, aggr_time = "h", file.name = "meteoB2.txt",skipwinter = F)
dB_getGEOtop(path2files = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/B2/",
header.file = "H:/Projekte/HiResAlp/06_Workspace/BrJ/02_data/Station_data_Mazia/B/header_B2.txt",
station = "B2", mkreg = F, aggr_time = "h", file.name = "meteoB2.txt",skipwinter = F)
